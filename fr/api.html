
<!DOCTYPE HTML>
<html lang="fr" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Référence de l'API · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-theme-vuejs/vue.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="api.html" />
    
    
    <link rel="prev" href="non-node.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Tapez pour rechercher" />
</div>

            
                <nav role="navigation">
                
<script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=vuejs" id="_carbonads_js"></script>




<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="basic.html">
            
                <a href="basic.html">
            
                    
                    Utilisation de base
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="universal.html">
            
                <a href="universal.html">
            
                    
                    Écrire du code universel
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="structure.html">
            
                <a href="structure.html">
            
                    
                    Structure de code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="routing.html">
            
                <a href="routing.html">
            
                    
                    Routage et scission du code
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="data.html">
            
                <a href="data.html">
            
                    
                    Récupération de données et état
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="hydration.html">
            
                <a href="hydration.html">
            
                    
                    Hydratation côté client
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="bundle-renderer.html">
            
                <a href="bundle-renderer.html">
            
                    
                    Introduction au moteur de dépaquetage
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="build-config.html">
            
                <a href="build-config.html">
            
                    
                    Configuration de précompilation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="css.html">
            
                <a href="css.html">
            
                    
                    Gestion des CSS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="head.html">
            
                <a href="head.html">
            
                    
                    Gestion des entêtes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="caching.html">
            
                <a href="caching.html">
            
                    
                    Mise en cache
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="streaming.html">
            
                <a href="streaming.html">
            
                    
                    Envoi par flux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="non-node.html">
            
                <a href="non-node.html">
            
                    
                    Utilisation dans des environnements autres que Node.js
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.15" data-path="api.html">
            
                <a href="api.html">
            
                    
                    Référence de l'API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="api.html">
            
                <a href="api.html#createrendereroptions">
            
                    
                    createRenderer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="api.html">
            
                <a href="api.html#createbundlerendererbundle-options">
            
                    
                    createBundleRenderer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.3" data-path="api.html">
            
                <a href="api.html#class-renderer">
            
                    
                    Class: Renderer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.4" data-path="api.html">
            
                <a href="api.html#class-bundlerenderer">
            
                    
                    Class: BundleRenderer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5" data-path="api.html">
            
                <a href="api.html#renderer-options">
            
                    
                    Options de Renderer
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.5.1" data-path="api.html">
            
                <a href="api.html#template">
            
                    
                    template
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5.2" data-path="api.html">
            
                <a href="api.html#clientmanifest">
            
                    
                    clientManifest
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5.3" data-path="api.html">
            
                <a href="api.html#inject">
            
                    
                    inject
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5.4" data-path="api.html">
            
                <a href="api.html#shouldpreload">
            
                    
                    shouldPreload
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5.5" data-path="api.html">
            
                <a href="api.html#runinnewcontext">
            
                    
                    runInNewContext
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5.6" data-path="api.html">
            
                <a href="api.html#basedir">
            
                    
                    basedir
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5.7" data-path="api.html">
            
                <a href="api.html#cache">
            
                    
                    cache
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.5.8" data-path="api.html">
            
                <a href="api.html#directives">
            
                    
                    directives
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15.6" data-path="api.html">
            
                <a href="api.html#webpack-plugins">
            
                    
                    Plugins webpack
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Publié avec GitBook
        </a>
    </li>
</ul>



                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
  
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Référence de l'API</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="r&#xE9;f&#xE9;rence-de-lapi">R&#xE9;f&#xE9;rence de l&apos;API</h1>
<h2 id="createrendereroptions"><code>createRenderer([options])</code></h2>
<p>Cr&#xE9;e une instance de <a href="#class-renderer"><code>Renderer</code></a> avec des <a href="#renderer-options">options</a> optionnelles.</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> { createRenderer } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;vue-server-renderer&apos;</span>)
<span class="hljs-keyword">const</span> renderer = createRenderer({ ... })
</code></pre>
<h2 id="createbundlerendererbundle-options"><code>createBundleRenderer(bundle[, options])</code></h2>
<p>Cr&#xE9;e une instance de <a href="#class-bundlerenderer"><code>BundleRenderer</code></a> avec un paquetage serveur et des <a href="#renderer-options">options</a> optionnelles.</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> { createBundleRenderer } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;vue-server-renderer&apos;</span>)
<span class="hljs-keyword">const</span> renderer = createBundleRenderer(serverBundle, { ... })
</code></pre>
<p>L&apos;argument <code>serverBundle</code> peut &#xEA;tre l&apos;un des &#xE9;l&#xE9;ments suivants :</p>
<ul>
<li><p>Un chemin absolu pour g&#xE9;n&#xE9;rer un fichier de paquetage (<code>.js</code> ou <code>.json</code>). Doit commencer par <code>/</code> pour &#xEA;tre consid&#xE9;r&#xE9; comme un chemin de fichier.</p>
</li>
<li><p>Un objet de paquetage g&#xE9;n&#xE9;r&#xE9; par webpack + <code>vue-server-renderer/server-plugin</code>.</p>
</li>
<li><p>Une chaine de caract&#xE8;res de code JavaScript (non recommand&#xE9;).</p>
</li>
</ul>
<p>Voyez l&apos;<a href="bundle-renderer.html">Introduction au moteur de d&#xE9;paquetage</a> et la <a href="build-config.html">Configuration de pr&#xE9;compilation</a> pour plus de d&#xE9;tails.</p>
<h2 id="class-renderer"><code>Class: Renderer</code></h2>
<ul>
<li><h4 id="rendererrendertostringvm-context-callback-promisestring"><code>renderer.renderToString(vm[, context, callback]): ?Promise&lt;string&gt;</code></h4>
<p>Fait le rendu d&apos;une instance de Vue sous forme de chaine de caract&#xE8;res. L&apos;objet de contexte est optionnel. La fonction de rappel est une fonction de rappel typique de Node.js avec en premier argument l&apos;erreur potentielle et en second argument la chaine de caract&#xE8;res du rendu.</p>
<p>Dans la 2.5.0+, la fonction de rappel est &#xE9;galement optionnelle. Quand aucune fonction de rappel n&apos;est fournie, la m&#xE9;thode retourne une promesse r&#xE9;solue avec le HTML rendu.</p>
</li>
<li><h4 id="rendererrendertostreamvm-context-streamreadable"><code>renderer.renderToStream(vm[, context]): stream.Readable</code></h4>
<p>Fait le rendu d&apos;une instance de Vue sous forme de <a href="https://nodejs.org/dist/latest-v8.x/docs/api/stream.html#stream_readable_streams" target="_blank">flux Node.js</a>. L&apos;objet de contexte est optionnel. Voir l&apos;<a href="streaming.html">Envoi par flux</a> pour plus de d&#xE9;tails.</p>
</li>
</ul>
<h2 id="class-bundlerenderer"><code>Class: BundleRenderer</code></h2>
<ul>
<li><h4 id="bundlerendererrendertostringcontext-callback-promisestring"><code>bundleRenderer.renderToString([context, callback]): ?Promise&lt;string&gt;</code></h4>
<p>Fait le rendu d&apos;un paquetage sous forme de chaine de caract&#xE8;res. L&apos;objet de contexte est optionnel. La fonction de rappel est une fonction de rappel typique de Node.js avec en premier argument l&apos;erreur potentielle et en second argument la chaine de caract&#xE8;res du rendu.</p>
<p>Dans la 2.5.0+, la fonction de rappel est &#xE9;galement optionnelle. Quand aucune fonction de rappel n&apos;est fournie, la m&#xE9;thode retourne une promesse r&#xE9;solue avec le HTML rendu.</p>
</li>
<li><h4 id="bundlerendererrendertostreamcontext-streamreadable"><code>bundleRenderer.renderToStream([context]): stream.Readable</code></h4>
<p>Fait le rendu d&apos;un paquetage sous forme de <a href="https://nodejs.org/dist/latest-v8.x/docs/api/stream.html#stream_readable_streams" target="_blank">flux Node.js</a>. L&apos;objet de contexte est optionnel. Voir l&apos;<a href="streaming.html">Envoi par flux</a> pour plus de d&#xE9;tails.</p>
</li>
</ul>
<h2 id="options-de-renderer">Options de <code>Renderer</code></h2>
<ul>
<li><h4 id="template"><code>template</code></h4>
<p>Fournit un mod&#xE8;le de page pour la page HTML compl&#xE8;te. Le mod&#xE8;le de page devrait contenir en commentaire <code>&lt;!--vue-ssr-outlet--&gt;</code> qui permet de d&#xE9;finir l&apos;emplacement du contenu de chaque rendu de l&apos;application.</p>
<p>Le mod&#xE8;le de page supporte &#xE9;galement l&apos;interpolation basique en utilisant le contexte du rendu :</p>
<ul>
<li>utilisez les doubles moustaches pour de l&apos;interpolation avec HTML &#xE9;chapp&#xE9; et</li>
<li>utilisez les triples moustaches pour de l&apos;interpolation avec HTML non &#xE9;chapp&#xE9;.</li>
</ul>
<p>Le mod&#xE8;le de page injecte automatiquement le contenu quand certaines donn&#xE9;es sont trouv&#xE9;es dans le contexte du rendu :</p>
<ul>
<li><p><code>context.head</code>: (string) n&apos;importe quelle balise d&apos;ent&#xEA;te qui devrait &#xEA;tre inject&#xE9;e dans la balise <code>&lt;head&gt;</code> de la page.</p>
</li>
<li><p><code>context.styles</code>: (string) n&apos;importe quelle CSS qui devrait &#xEA;tre inject&#xE9;e dans la balise <code>&lt;head&gt;</code> de la page. Notez que cette propri&#xE9;t&#xE9; va automatiquement &#xEA;tre inject&#xE9;e si vous utilisez <code>vue-loader</code> + <code>vue-style-loader</code> pour la CSS de vos composants.</p>
</li>
<li><p><code>context.state</code>: (Object) L&apos;&#xE9;tat initial du store Vuex devrait &#xEA;tre inject&#xE9; dans la page sous la variable <code>window.__INITIAL_STATE__</code>. Le JSON en ligne est automatiquement d&#xE9;sinfect&#xE9; avec <a href="https://github.com/yahoo/serialize-javascript" target="_blank">serialize-javascript</a> pour &#xE9;viter les injections XSS.</p>
<p>Dans la 2.5.0+, les scripts inject&#xE9;s sont automatiquement retir&#xE9;s en mode production.</p>
</li>
</ul>
<p>En plus, quand <code>clientManifest</code> est fourni, le mod&#xE8;le de page injecte automatiquement les &#xE9;l&#xE9;ments suivants :</p>
<ul>
<li>JavaScript client et fichiers CSS n&#xE9;cessaires pour le rendu (avec les fragments asynchrones automatiquement d&#xE9;duits),</li>
<li>utilisation optimale des cibles de ressources <code>&lt;link rel=&quot;preload/prefetch&quot;&gt;</code> pour le rendu de la page.</li>
</ul>
<p>Vous pouvez d&#xE9;sactiver toutes ces injections en passant <code>inject: false</code> au moteur de rendu.</p>
<p>Voir &#xE9;galement :</p>
<ul>
<li><a href="basic.html#utiliser-un-mod&#xE8;le-de-page">Utiliser un mod&#xE8;le de page</a></li>
<li><a href="build-config.html#injection-manuelle-des-fichiers">Injection manuelle des fichiers</a></li>
</ul>
</li>
<li><h4 id="clientmanifest"><code>clientManifest</code></h4>
<ul>
<li>2.3.0+</li>
</ul>
<p>Fournit un objet de build de manifeste g&#xE9;n&#xE9;r&#xE9; par <code>vue-server-renderer/client-plugin</code>. Le manifeste client fournit le paquetage de moteur de rendu avec ses propres informations pour l&apos;injection automatique de fichiers dans le mod&#xE8;le de page HTML. Pour plus de d&#xE9;tails, consultez <a href="build-config.html#generer-le-clientmanifest">G&#xE9;n&#xE9;rer le <code>clientManifest</code></a>.</p>
</li>
<li><h4 id="inject"><code>inject</code></h4>
<ul>
<li>2.3.0+</li>
</ul>
<p>Contr&#xF4;le la mani&#xE8;re d&apos;ex&#xE9;cuter des injections automatiques en utilisant <code>template</code>. Par d&#xE9;faut &#xE0; <code>true</code>.</p>
<p>Voir aussi : <a href="build-config.html#injection-manuelle-des-fichiers">Injection manuelle des fichiers</a>.</p>
</li>
<li><h4 id="shouldpreload"><code>shouldPreload</code></h4>
<ul>
<li>2.3.0+</li>
</ul>
<p>Une fonction pour contr&#xF4;ler quels fichiers doivent avoir les cibles de ressource <code>&lt;link rel=&quot;preload&quot;&gt;</code> de g&#xE9;n&#xE9;r&#xE9;es.</p>
<p>Par d&#xE9;faut, seuls les fichiers JavaScript et les fichiers CSS seront pr&#xE9;charg&#xE9;s, car ils sont absolument n&#xE9;cessaires pour le d&#xE9;marrage de l&apos;application.</p>
<p>Pour les autres types de fichiers comme les images et les polices, le pr&#xE9;chargement pouvant g&#xE2;cher de la bande passante inutilement et m&#xEA;me baisser les performances, cela est laiss&#xE9; &#xE0; votre appr&#xE9;ciation. Vous pouvez contr&#xF4;ler pr&#xE9;cis&#xE9;ment le pr&#xE9;chargement en utilisant l&apos;option <code>shouldPreload</code> :</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> renderer = createBundleRenderer(bundle, {
  template,
  clientManifest,
  shouldPreload: (file, type) =&gt; {
    <span class="hljs-comment">// le type est d&#xE9;duit en se basant sur l&apos;extension du fichier.</span>
    <span class="hljs-comment">// https://fetch.spec.whatwg.org/#concept-request-destination</span>
    <span class="hljs-keyword">if</span> (type === <span class="hljs-string">&apos;script&apos;</span> || type === <span class="hljs-string">&apos;style&apos;</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
    <span class="hljs-keyword">if</span> (type === <span class="hljs-string">&apos;font&apos;</span>) {
      <span class="hljs-comment">// pr&#xE9;charger uniquement les polices woff2</span>
      <span class="hljs-keyword">return</span> <span class="hljs-regexp">/\.woff2$/</span>.test(file)
    }
    <span class="hljs-keyword">if</span> (type === <span class="hljs-string">&apos;image&apos;</span>) {
      <span class="hljs-comment">// charger uniquement les images importantes</span>
      <span class="hljs-keyword">return</span> file === <span class="hljs-string">&apos;hero.jpg&apos;</span>
    }
  }
})
</code></pre>
</li>
<li><h4 id="shouldprefetch"><code>shouldPrefetch</code></h4>
<ul>
<li>2.5.0+</li>
</ul>
<p>Une fonction pour contr&#xF4;ler quels fichiers devraient avoir la cible de ressource <code>&lt;link rel=&quot;prefetch&quot;&gt;</code> g&#xE9;n&#xE9;r&#xE9;e.</p>
<p>Par d&#xE9;faut, toutes les ressources sont des morceaux asynchrones qui vont &#xEA;tre pr&#xE9;charg&#xE9;es du fait que se sont des directives de basse priorit&#xE9;. Cependant vous pouvez personnaliser ce qui est pr&#xE9;charg&#xE9; afin d&apos;avoir un meilleur contr&#xF4;le sur l&apos;utilisation de la bande passante. Cette option utilise une d&#xE9;claration de fonction identique &#xE0; celle de <code>shouldPreload</code>.</p>
</li>
<li><h4 id="runinnewcontext"><code>runInNewContext</code></h4>
<ul>
<li>2.3.0+</li>
<li>seulement utilis&#xE9;e avec <code>createBundleRenderer</code></li>
<li>Requiert : <code>boolean | &apos;once&apos;</code> (<code>&apos;once&apos;</code> est seulement support&#xE9; dans la 2.3.1+)</li>
</ul>
<p>Par d&#xE9;faut, pour chaque rendu, le moteur de d&#xE9;paquetage va cr&#xE9;er un nouveau contexte V8 et r&#xE9;ex&#xE9;cuter le paquetage complet. Cela a plusieurs b&#xE9;n&#xE9;fices, par exemple, isoler le code de l&apos;application des processus du serveur ce qui permet d&apos;<a href="structure.html#eviter-les-singletons-detat">&#xC9;viter les singletons d&apos;&#xE9;tat</a> mentionn&#xE9;s dans la documentation. Cependant, ce mode a des couts de performance importants car r&#xE9;ex&#xE9;cuter le paquetage est quelque chose de couteux, surtout quand l&apos;application est grosse.</p>
<p>Cette option est par d&#xE9;faut &#xE0; <code>true</code> pour la r&#xE9;trocompatibilit&#xE9;, mais il est recommand&#xE9; d&apos;utiliser <code>runInNewContext: false</code> ou <code>runInNewContext: &apos;once&apos;</code> si vous le pouvez.</p>
<blockquote>
<p>Dans la 2.3.0 cette option a un bogue car <code>runInNewContext: false</code> ex&#xE9;cute toujours le paquetage en utilisant un contexte global s&#xE9;par&#xE9;. Les informations suivantes sont donc valables pour la version 2.3.1+.</p>
</blockquote>
<p>Avec <code>runInNewContext: false</code>, le code de paquetage va tourner dans le m&#xEA;me contexte <code>global</code> du processus serveur, donc faites attention au code qui modifie <code>global</code> dans le code de votre application.</p>
<p>Avec <code>runInNewContext: &apos;once&apos;</code> (2.3.1+), le paquetage est &#xE9;valu&#xE9; dans un contexte <code>global</code> s&#xE9;par&#xE9;, cependant cela n&apos;est effectu&#xE9; qu&apos;au d&#xE9;marrage. Cela permet une meilleure isolation du code de l&apos;application puisqu&apos;il emp&#xEA;che le paquetage d&apos;accidentellement polluer l&apos;objet <code>global</code> du processus serveur. Les limitations sont les suivantes :</p>
<ol>
<li>Les d&#xE9;pendances qui modifient l&apos;objet <code>global</code> (ex. polyfills) ne peuvent &#xEA;tre externalis&#xE9;es dans ce mode,</li>
<li>Les valeurs retourn&#xE9;es lors de l&apos;ex&#xE9;cution du paquetage utiliseront des constructeurs globaux diff&#xE9;rents. Par ex. une erreur lev&#xE9;e &#xE0; l&apos;int&#xE9;rieur du paquetage ne sera pas une instance de <code>Error</code> dans le processus serveur.</li>
</ol>
<p>Voir aussi : <a href="structure.html">Structure de code</a></p>
</li>
<li><h4 id="basedir"><code>basedir</code></h4>
<ul>
<li>2.2.0+</li>
<li>seulement utilis&#xE9;e avec <code>createBundleRenderer</code></li>
</ul>
<p>D&#xE9;clarer explicitement le dossier de base du paquetage serveur afin de r&#xE9;soudre les d&#xE9;pendances <code>node_modules</code>. Cela est n&#xE9;cessaire si le fichier de paquetage g&#xE9;n&#xE9;r&#xE9; est plac&#xE9; &#xE0; un endroit diff&#xE9;rent de l&#xE0; o&#xF9; les d&#xE9;pendances externes npm sont install&#xE9;es, ou si <code>vue-server-renderer</code> est li&#xE9; &#xE0; npm dans votre projet courant.</p>
</li>
<li><h4 id="cache"><code>cache</code></h4>
<p>Fournit une impl&#xE9;mentation de <a href="caching.html#mise-en-cache-au-niveau-du-composant">Mise en cache au niveau du composant</a>. L&apos;objet de cache doit impl&#xE9;menter l&apos;interface suivante (utilisation des notations Flow) :</p>
<pre><code class="lang-js">type RenderCache = {
  get: (key: string, cb?: <span class="hljs-built_in">Function</span>) =&gt; string | <span class="hljs-keyword">void</span>;
  set: (key: string, val: string) =&gt; <span class="hljs-keyword">void</span>;
  has?: (key: string, cb?: <span class="hljs-built_in">Function</span>) =&gt; boolean | <span class="hljs-keyword">void</span>;
};
</code></pre>
<p>Une utilisation typique est de passer un <a href="https://github.com/isaacs/node-lru-cache" target="_blank">objet de mise en cache qui supprime l&apos;objet le plus r&#xE9;cemment utilis&#xE9;</a> :</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> LRU = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;lru-cache&apos;</span>)

<span class="hljs-keyword">const</span> renderer = createRenderer({
  cache: LRU({
    max: <span class="hljs-number">10000</span>
  })
})
</code></pre>
<p>Notez que cet objet de mise en cache doit au moins impl&#xE9;menter <code>get</code> et <code>set</code>. De plus <code>get</code> et <code>set</code> peuvent &#xEA;tre optionnellement asynchrones s&apos;ils acceptent en second argument une fonction de rappel. Cela permet &#xE0; la mise en cache d&apos;utiliser des APIs. Par ex. un client Redis :</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> renderer = createRenderer({
  cache: {
    get: (key, cb) =&gt; {
      redisClient.get(key, (err, res) =&gt; {
        <span class="hljs-comment">// g&#xE9;rer les erreurs s&apos;il y en a</span>
        cb(res)
      })
    },
    set: (key, val) =&gt; {
      redisClient.set(key, val)
    }
  }
})
</code></pre>
</li>
<li><h4 id="directives"><code>directives</code></h4>
<p>Vous permet de fournir des impl&#xE9;mentations c&#xF4;t&#xE9; serveur pour vos directives personnalis&#xE9;es :</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> renderer = createRenderer({
  directives: {
    example (vnode, directiveMeta) {
      <span class="hljs-comment">// transformer les vnode en directive de liaison de metadata</span>
    }
  }
})
</code></pre>
<p>Consultez l&apos;<a href="https://github.com/vuejs/vue/blob/dev/src/platforms/web/server/directives/show.js" target="_blank">impl&#xE9;mentation de <code>v-show</code> c&#xF4;t&#xE9; serveur</a> en tant qu&apos;exemple.</p>
</li>
</ul>
<h2 id="plugins-webpack">Plugins webpack</h2>
<p>Les pluging webpack sont fournis en fichiers autonomes et devraient &#xEA;tre requis en direct :</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> VueSSRServerPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;vue-server-renderer/server-plugin&apos;</span>)
<span class="hljs-keyword">const</span> VueSSRClientPlugin = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;vue-server-renderer/client-plugin&apos;</span>)
</code></pre>
<p>Les fichiers g&#xE9;n&#xE9;r&#xE9;s par d&#xE9;faut sont :</p>
<ul>
<li><code>vue-ssr-server-bundle.json</code> pour le plugin serveur,</li>
<li><code>vue-ssr-client-manifest.json</code> pour le plugin client.</li>
</ul>
<p>Les noms de fichiers peuvent &#xEA;tre personnalis&#xE9;s lors de la cr&#xE9;ation des instances des plugins :</p>
<pre><code class="lang-js"><span class="hljs-keyword">const</span> plugin = <span class="hljs-keyword">new</span> VueSSRServerPlugin({
  filename: <span class="hljs-string">&apos;my-server-bundle.json&apos;</span>
})
</code></pre>
<p>Voir la <a href="build-config.html">Configuration de pr&#xE9;compilation</a> pour plus d&apos;informations.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
  <script src="//m.servedby-buysellads.com/monetization.js" type="text/javascript"></script>
  <div class="bsa-cpc"></div>
  <script>
    (function(){
      if(typeof _bsa !== 'undefined' && _bsa) {
      _bsa.init('default', 'CKYD62QM', 'placement:vuejsorg', {
        target: '.bsa-cpc',
        align: 'horizontal',
        disable_css: 'true'
      });
        }
    })();
  </script>

            </div>

            
                
                <a href="non-node.html" class="navigation navigation-prev " aria-label="Previous page: Utilisation dans des environnements autres que Node.js">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="api.html#createrendereroptions" class="navigation navigation-next " aria-label="Next page: createRenderer">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Référence de l'API","level":"1.15","depth":1,"next":{"title":"createRenderer","level":"1.15.1","depth":2,"anchor":"#createrendereroptions","path":"api.md","ref":"api.md#createrendereroptions","articles":[]},"previous":{"title":"Utilisation dans des environnements autres que Node.js","level":"1.14","depth":1,"path":"non-node.md","ref":"non-node.md","articles":[]},"dir":"ltr"},"config":{"plugins":["edit-link","theme-vuejs","-fontsettings","github"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"edit-link":{"label":"Edit This Page","base":"https://github.com/vuejs/vue-ssr-docs/edit/master/"},"github":{"url":"https://github.com/vuejs/vue-ssr-docs/"},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":false,"twitter":false,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-vuejs":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"fr","links":{"sharing":{"facebook":false,"twitter":false}},"gitbook":"*"},"file":{"path":"api.md","mtime":"2018-04-28T11:20:29.599Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2018-05-22T06:54:12.163Z"},"basePath":".","book":{"language":"fr"}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    

    </body>
</html>

